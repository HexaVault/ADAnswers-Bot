<!doctype html>
  <head>
    <title>Clicky pen</title>
    <meta name="clicky pen" content="click the pen">
    <link rel="stylesheet" type="text/css" href="styles.css">
  </head>
  <body onload="updateLabel()">
    <script type="text/javascript">
      const data = JSON.parse(localStorage.getItem("pendata")) ?? { clicked: 0, penDown: false };

      let clicked = data.clicked;
      let penDown = data.penDown;

      function quantify(word, count) {
        function pluralise(w, c) {
          if (c === 1) return w;
          return `${w}s`;
        }

        return `${count} ${pluralise(word, count)}`;
      }

      function updateLabel() {
        document.getElementById("label").innerHTML = `${clicked === 0 ? "You have never clicked the pen" : `You have clicked the button ${quantify("time", clicked)}`}`;
      }

      function click2() {
        if (penDown) {
          const audio = document.getElementById("penup");
          audio.play();
          audio.currentTime = 0;
        } else {
          const audio = document.getElementById("pendown");
          audio.play();
          audio.currentTime = 0;
        }

        clicked++;
        penDown = !penDown;
        updateLabel();
        localStorage.setItem("pendata", JSON.stringify({ clicked, penDown }))
      }
    </script>
    <audio id="pendown" src="./sounds/pen_down.mp3" preload="auto"></audio>
    <audio id="penup" src="./sounds/pen_up.mp3" preload="auto"></audio>
    <div id="ui">
      <h1>cliky pen</h1>
      <br>
      <div class="l-button">
        <button class="o-button" onclick="click2()">
          Click me!
        </button>
        <br>
        <h3 id="label">
          x
        </h3>
        <br>
        <h4>
          The pen in question is a Uniball Signo 207, which is perhaps my favourite pen I've ever used.
          <br>
          Here is <a href="https://i.imgur.com/XP75J4v.png">a picture.</a>
        </h4>
      </div>
    </div>
  </body>
</html>